""" check LAg
= :LAg [<options>..] [regex] [<path>..]
-----------------------------------------

Execute (Hold cwd fixture):
  fun! _hasCorrectBufType()
    return (&buftype == 'quickfix') &&
      \ empty(getqflist()) && !empty(getloclist(0))
  endf
  cd fixture

================================
Execute (Cmdline cwd):
  LAg bazz

Then (Check buffer type):
  Assert _hasCorrectBufType()

Expect (Filename only, 1 match):
  sample.vim|3 col 16| let fuga = 'bazz'

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Given (cword):
  bazz

Do (Empty):
  :LAg\<CR>

Then (Check buffer type):
  Assert _hasCorrectBufType()

Expect (Filename only, 1 match):
  sample.vim|3 col 16| let fuga = 'bazz'

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Given (cword):
  bazz

Do (Empty):
  :\<C-u>LAg\<CR>

Then (Check buffer type):
  Assert _hasCorrectBufType()

Expect (Filename only, 1 match):
  sample.vim|3 col 16| let fuga = 'bazz'

================================
Execute (Change cwd fixture):
  cd ..

================================
Execute(Cmdline dir):
  LAg fuga fixture

Expect (Full path, 4 matches):
  fixture/sample.vim|3 col 8| let fuga = 'bazz'
  fixture/sample.vim|11 col 7| if fuga =~ 'z'
  fixture/sample.vim|12 col 13| echo "fuga contains z"
  fixture/sample.vim|14 col 13| echo 'fuga does not contains z'

================================
Before:
After:
Execute (Release fixture):
  delf _hasCorrectBufType
